#!/usr/bin/env bash

# https://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash

for i in `seq 1 10`
  do
    echo $i
  done


for argument in "$@"
  do
    case $argument in

      -hd)
        declare -ir WIDTH=1920
        declare -ir HEIGHT=1080
        shift # past argument AND value
        ;;

      -help)
        echo
        echo "Options:"
        echo "-help                   show brief help"
        echo "-input=[file|color]     Input file or color"
        echo "-letterbox=[color|blur] set letterbox to color or blurred video matte"
        echo "-passes=[number]        Number of passes for video"
        echo "-stats                  output stats (and time)"
        echo "-watermark=[file]       Watermark image file"
        echo
        exit 0
        ;;

      -end=*)
        declare -r INPUT="${argument#*=}"
        shift # past argument AND value
        ;;


      -input=*)
        declare -r INPUT="${argument#*=}"
        shift # past argument AND value
        ;;

      -letterbox*)
        declare -r MATTE=$( [[ $argument =~ ^-letterbox$ ]] && echo "black" || echo ${argument#*=})
        # shift # past key
        # shift # past value
        shift # past argument AND value
        ;;

      -passes=*)
        declare -r PASSES="${argument#*=}"
        shift # past argument AND value
        ;;

      -stats)
        source $BIN/.stats
        shift # past argument AND value
        ;;

      -watermark=*)
        declare -r WATERMARK="${argument#*=}"
        shift # past argument AND value
        ;;

      -input|-letterbox|-passes)
        echo "$1 requires a value to be set (i.e. $1=value)" >&2; exit 1;;

      -*)
        echo "unknown option: $1" >&2; exit 1;;

      *)
        declare -r OUTPUT="$1"
        ;;
    esac
  done
