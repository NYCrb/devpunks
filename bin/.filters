#!/usr/bin/env bash

echo Loading filters

: ${SCALE? ❌ not set} ${DEINTERLACE? ❌ not set}

echo Loading Scale: $SCALE


# LUTS - https://ffmpeg.org/pipermail/ffmpeg-user/2014-May/021356.html
# FFMPEG Mailing List - https://ffmpeg.org/pipermail/ffmpeg-user/2014-February/020063.html
# BBC Article - http://downloads.bbc.co.uk/rd/pubs/papers/HDR/BBC_HDRTV_Use_of_LUTs_FFmpeg.pdf
# FILTERS https://ffmpeg.org/ffmpeg-filters.html#Filtergraph-description
#         http://manpages.ubuntu.com/manpages/cosmic/man1/ffmpeg-filters.1.html
declare -r  LUT="lut3d=./blue.cube"
declare -r  SPEED="setpts=1.0*PTS" # Multiplier. (Higher = longer, Lower = shorter)
# declare -r  VIDEO_FILTERS="-filter:v $SCALE,$DEINTERLACE,$LUT,$SPEED" # https://ffmpeg.org/ffmpeg-filters.html#yadif-1
declare -r  VIDEO_FILTERS="-filter:v $SCALE,$DEINTERLACE,$SPEED,$LETTERBOX" # https://ffmpeg.org/ffmpeg-filters.html#yadif-1

# VOLUME https://stackoverflow.com/questions/38085408/complex-audio-volume-changes-with-ffmpeg
#declare -r  VOLUME="volume=-3dB"                      # Audio volume level 0-256 (256 = normaled) (-100dB = "silence" logrithmic curving)
declare -r  FADE_IN="volume=enable='between(t,0,20)':volume='t/20.0':eval=frame"
declare -r  FADE_OUT="volume=enable='between(t,40,60)':volume='1-(t-40)/20.0':eval=frame"
declare -r  VOLUME="$FADE_IN,$FADE_OUT"                # Audio volume level 0-256 (256 = normaled) (-100dB = "silence" logrithmic curving)
# declare -r  AUDIO_FILTERS="-filter:a $VOLUME"          # Audio Filters
declare -r  FILTER= # -filter [filter]                 # Main filter
declare -r  FILTERS="$AUDIO_FILTERS $VIDEO_FILTERS"

